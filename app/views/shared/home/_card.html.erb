<div class="card recreation-card h-100 shadow text-decoration-none">
  <%= link_to customers_recreation_path(rec.id), class: "card-img-top zoom" do %>
    <picture loading="lazy">
      <%= image_tag rec.recreation_images.sliders.first&.image.to_s, class: 'img-fluid position-relative', loading: 'lazy' %>
      <p class="position-absolute bg-white text-black top-0 end-0 m-2 px-1 border border-dark rounded"><%= t("enumerize.recreation.kind.#{rec.kind}")%></p>
    </picture>
  <% end %>

  <%= link_to customers_recreation_path(rec.id), class: "card-body card-body-main p-2 pb-0" do %>
    <h1 class="card-title mb-0">
      <p><%= rec.title %></p>
    </h1>
  <% end %>


  <div class="d-flex align-items-center">
    <div class="card-body card-body-tag px-2 py-1">
      <%= tag_to_html(rec) %>
    </div>
  </div>

  <div class="px-2">
    <div class="row">
      <div class="card-body link-text py-0 col-10">
        <div class="link-text d-flex">
          <%= image_pack_tag 'ribbon.svg', class: "logo-navbar", width: "20", height: "20" %>
          <p class="ms-1 mb-0">開催回数<%= rec.number_of_recreations_held %>件</p>
        </div>
        <div class="d-flex">
          <% if rec.kind.visit? && rec.recreation_prefectures.exists? %>
            <%= image_pack_tag 'location.svg', class: "logo-navbar", width: "20", height: "20" %>
            <% rec.recreation_prefectures.take(3).each do |prefecture| %>
              <p class="ms-1 mb-0"><%= prefecture.name %></p>
            <% end %>
          <% end %>
        </div>
      </div>
      <div class="col-2 position-relative">
        <% if user_signed_in? %>
          <% if current_user.role.customer? %>
            <div class="favorite-wrapper">
              <div class="pe-1 favorite-icon" id='favoriteIcon_<%= rec.id %>'></div>
              <p class="desc-favorite px-2 py-1 bg-white position-absolute rounded border shadow">お気に入りに追加</p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="card-body card-body-info px-2 py-1 border-top mt-1">
    <div class="d-md-flex mb-2 align-items-center">
      <% if rec.user.approval_status.approved? %>
        <div class="mx-md-2">
          <i class="fas fa-solid fa-check"></i>
          <span class="value">面談済</span>
        </div>
      <% end %>
      <div class="">
        <% if rec.is_public_price %>
          <span class="value"><%= price_pipe(rec&.price, current_user) %></span>
        <% else %>
          <span class="value">お問い合わせ下さい</span>
        <% end %>
      </div>
    </div>
  </div>
</div>
